# task in google map
地图定位和业务派单
在谷歌地图上定位分支机构、客户、客户经理位置定位

## 1. 实现功能

#### 1.1. 位置信息

  1.1.1. 总部，分支机构的位置信息(google maps api markers)，固定位置信息，总部，分支机构，二级分支机构。

  1.1.2. 客户固定位置（google maps api markers），固定位置信息。

  1.1.3. 客户经理位置（通过平板电脑APP客户端GPS）实时定位。

#### 1.2. 后台调度员向客户经理派工单，要求在一定时间内去拜访客户，并根据特定流程完成整个派单任务；

  1.2.1. 后台调度员通过电脑浏览器登录系统，向客户经理派工单(task)；
  
  1.2.2. 客户经理通过平板电脑和手机短信息收到工单信息（task）；
  
  1.2.3. 客户经理根据工单信息，数日内（限时）拜访客户；
  
  1.2.4. 客户经理每完成流程（多个环节）中的一个环节，通过平板电脑APP向信息报告派单进展情况；
  
#### 1.3. 客户经理拜访老客户（自建工单），通过系统标记（marker）客户位置与导航，拜访客户并填报拜访信息。


## 2. 角色

#### 2.1. admin（系统管理员）
  
  登录系统后台，添加主要角色；

#### 2.2. Engineer（业务调度员）

    2.2.1. 登录系统，维护分支机构信息与客户经理信息；
    
    2.2.2. 编制工单流程；
    
    2.2.3. 向分支机构派单；
    
    2.2.4. 在系统中发布公单（所有人员抢单）；
    
    2.2.5. 每个工单评分；
    
#### 2.3. manager （分支机构主管）
  
    2.3.1. 维护客户信息；
    
    2.3.2. 接收总部派单；
    
    2.3.3. 发起本机构派单；
    
    2.3.4. 向客户经理派单；
    
    2.3.5. 向本机构工单评分；
   
#### 2.4. banker （客户经理）

    2.4.1. 接工单；
    
    2.4.2. 抢工单；
    
    2.4.3. 创建工单；
    
    2.4.4. 根据工单要求，拜访客户，编写工单文案；
    
    2.4.5. 完成工单；

## 3. 模块

#### 3.1 地图模块

    使用 maps.google.cn 作为地图背景；添加图层：
    
    3.1.1 图层1：机构位置信息（总部，分支机构，二级分支机构）；
    
    3.1.2 图层2：客户位置信息（A类客户，B类客户，C类客户，D类客户），实现分类显示。filter 全部，分类，单个；
    
    3.1.3 图层3：客户经理位置信息，动态，每隔5秒刷新一次。登录并显示位置的为彩色头像，未登录或不显示位置的为灰色头像；
    
#### 3.2 机构信息模块

    总部，分支机构，二级分支机构，自关联隶属关系；
    
    manager 与 banker 隶属分支机构；
    
#### 3.3 人员信息模块

    分四类，系统管理员，业务调度员，（分支）机构经理，客户经理，二级分支机构负责人
    
#### 3.4 客户信息模块

    支持分类和tag标签，以分类为主，tag标签为辅；
    
#### 3.5 派单业务模块

    Engineer 发起派单(task)，分派给分支机构，分支机构 manager 转派给 banker ，banker 完成工单；
    
#### 3.6 计分模块

    Engineer 和 manager 向工单评分，最少1分，最高5分；
    
## 4. 开发环境（计划）

####  4.1. ruby on rails WEB 服务器 + google maps API + 数据库

####  4.2. 电脑端浏览器；
  
    根据不同的登录权限获得不同的菜单功能；

####  4.3. 移动端封装为APK客户端，类似浏览器的封装
  
    根据不同的登录权限获得不同的菜单功能；

    
